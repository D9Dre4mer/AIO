\section{Giao di·ªán Wizard \& Tr·∫£i nghi·ªám Ng∆∞·ªùi d√πng}\label{sec:wizard-interface}

\noindent
N·ªÅn T·∫£ng M√°y h·ªçc To√†n Di·ªán s·ª≠ d·ª•ng ki·∫øn tr√∫c giao di·ªán wizard tinh vi ƒë·ªÉ mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng li·ªÅn m·∫°ch cho c√°c quy tr√¨nh l√†m vi·ªác ML ph·ª©c t·ª©c t·∫°p. Thi·∫øt k·∫ø n√†y t√≠ch h·ª£p qu·∫£n l√Ω phi√™n l√†m vi·ªác ti√™n ti·∫øn, x·ª≠ l√Ω l·ªói to√†n di·ªán v√† c√°c nguy√™n t·∫Øc thi·∫øt k·∫ø responsive ƒë·ªÉ t·∫°o ra t∆∞∆°ng t√°c tr·ª±c quan cho ng∆∞·ªùi d√πng v·ªõi c√°c m·ª©c ƒë·ªô chuy√™n m√¥n ML kh√°c nhau.

\paragraph{Ki·∫øn tr√∫c Technical Implementation:}
AIO Classifier ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n Streamlit v·ªõi implementation th·ª±c t·∫ø bao g·ªìm SessionManager qu·∫£n l√Ω session data v·ªõi wizard\_ui.session\_manager, StreamlitTrainingPipeline cho model training, Cache System s·ª≠ d·ª•ng \texttt{@st.cache\_resource} cho session preference, wizard 5 b∆∞·ªõc t·ª´ \texttt{templates\_wireframe()} ƒë·∫øn \texttt{render\_step5\_wireframe()}, Model Factory import t·ª´ models.model\_factory cho 13 thu·∫≠t to√°n ML, v√† c√°c Streamlit components v·ªõi real-time updates. H·ªá th·ªëng ƒë∆∞·ª£c th·ª≠ nghi·ªám tr√™n 2 b·ªô d·ªØ li·ªáu kh√°c nhau v·ªõi t·ªïng c·ªông 78 c·∫•u h√¨nh m√¥ h√¨nh (39 cho m·ªói dataset), ƒë·∫°t ƒë∆∞·ª£c hi·ªáu su·∫•t xu·∫•t s·∫Øc v·ªõi nhi·ªÅu m√¥ h√¨nh ƒë·∫°t ƒë·ªô ch√≠nh x√°c 100\% tr√™n t·∫≠p ki·ªÉm tra.

\subsection{Thi·∫øt k·∫ø Quy tr√¨nh 5 B∆∞·ªõc}\label{subsec:wizard-overview}

\subsubsection{T·ªïng quan Lu·ªìng C√¥ng vi·ªác}

AIO Classifier tri·ªÉn khai wizard c√≥ c·∫•u tr√∫c 5 b∆∞·ªõc ƒë·ªÉ h∆∞·ªõng d·∫´n ng∆∞·ªùi d√πng qua quy tr√¨nh ML:

\textbf{Lu·ªìng 5 B∆∞·ªõc c·ªßa Wizard:}
\begin{enumerate}[leftmargin=*]
    \item \textbf{Dataset Selection \& Upload}: Upload file CSV/Excel v·ªõi validation t·ª± ƒë·ªông, preview t∆∞∆°ng t√°c dataset v·ªõi ph√°t hi·ªán ki·ªÉu d·ªØ li·ªáu th√¥ng minh, c·∫•u h√¨nh sampling v·ªõi c√¢n b·∫±ng categories, ki·ªÉm tra ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu v·ªõi ph√°t hi·ªán missing values.
    
    \item \textbf{Data Processing \& Preprocessing}: Ch·ªçn c·ªôt input v√† label v·ªõi validation t·ª± ƒë·ªông, c·∫•u h√¨nh ph√¢n chia train/validation/test dataset, l·ª±a ch·ªçn scaler (StandardScaler, MinMaxScaler, RobustScaler), x·ª≠ l√Ω d·ªØ li·ªáu thi·∫øu v√† outlier v·ªõi c√°c chi·∫øn l∆∞·ª£c th√¥ng minh.
    
    \item \textbf{Optuna Optimization \& Ensemble Configuration}: L·ª±a ch·ªçn m√¥ h√¨nh ML v·ªõi h·ªó tr·ª£ 13 thu·∫≠t to√°n, c·∫•u h√¨nh Optuna cho hyperparameter optimization, thi·∫øt k·∫ø Voting Ensemble v·ªõi tr·ªçng s·ªë t√πy ch·ªânh, c·∫•u h√¨nh Stacking Ensemble v·ªõi meta-learner.
    
    \item \textbf{Training Execution and Monitoring}: Theo d√µi ti·∫øn tr√¨nh hu·∫•n luy·ªán real-time v·ªõi progress bars, gi√°m s√°t hi·ªáu su·∫•t v√† metrics trong qu√° tr√¨nh training, cache management th√¥ng minh cho t·ªëi ∆∞u h√≥a t·ªëc ƒë·ªô, c·∫•u h√¨nh ensemble v√† tham s·ªë chi ti·∫øt.
    
    \item \textbf{SHAP Visualization \& Confusion Matrix}: Ph√¢n t√≠ch SHAP to√†n di·ªán v·ªõi multiple plot types, confusion matrices chi ti·∫øt cho t·ª´ng m√¥ h√¨nh, so s√°nh hi·ªáu su·∫•t m√¥ h√¨nh v·ªõi metrics comprehensive, export k·∫øt qu·∫£ multiple formats (CSV, JSON, PNG), b√°o c√°o t·ªïng h·ª£p v·ªõi visualizations professional.
\end{enumerate}

\begin{figure}[H]
    \centering
\begin{tikzpicture}[scale=0.65]
% Define colors
\definecolor{darkgreen}{RGB}{34,139,34}
\definecolor{darkorange}{RGB}{255,140,0}
\definecolor{orange}{RGB}{255,165,0}

% Define styles with better spacing
\tikzset{
    step1/.style={rectangle, rounded corners, minimum width=2.2cm, minimum height=0.9cm, text width=2cm, text centered, draw=darkgreen, fill=darkgreen!15, font=\small},
    stepc/.style={rectangle, rounded corners, minimum width=2.2cm, minimum height=0.9cm, text width=2cm, text centered, draw=darkorange, fill=darkorange!15, font=\small},
    step5/.style={rectangle, rounded corners, minimum width=2.2cm, minimum height=0.9cm, text width=2cm, text centered, draw=orange, fill=orange!15, font=\small},
    arrow/.style={thick,->,>=stealth}
}

% Step nodes with maximum spacing
\node (step1) [step1] at (0,0) {B∆∞·ªõc 1 L·ª±a ch·ªçn Dataset};
\node (step2) [stepc] at (4,0) {B∆∞·ªõc 2 Ti·ªÅn x·ª≠ l√Ω};
\node (step3) [stepc] at (8,0) {B∆∞·ªõc 3 C·∫•u h√¨nh M√¥ h√¨nh};
\node (step4) [stepc] at (12,0) {B∆∞·ªõc 4 Hu·∫•n luy·ªán};
\node (step5) [step5] at (16,0) {B∆∞·ªõc 5 Tr·ª±c quan h√≥a};

% Arrows with colors
\draw [arrow, darkgreen] (step1) -- (step2);
\draw [arrow, darkorange] (step2) -- (step3);
\draw [arrow, darkorange] (step3) -- (step4);
\draw [arrow, orange] (step4) -- (step5);

% Labels below steps with maximum spacing
\node [text width=3.5cm, align=center, font=\tiny, text=darkgreen] at (0,-2) {
    Upload files\\
    Data preview\\
    Sampling config
};

\node [text width=3.5cm, align=center, font=\tiny, text=darkorange] at (4,-2) {
    Ph√°t hi·ªán ƒë·∫∑c tr∆∞ng\\
    T√πy ch·ªçn ph√¢n chia\\
    Validation rules
};

\node [text width=3.5cm, align=center, font=\tiny, text=darkorange] at (8,-2) {
    L·ª±a ch·ªçn m√¥ h√¨nh\\
    Tham s·ªë Optuna\\
    Ensemble config
};

\node [text width=3.5cm, align=center, font=\tiny, text=darkorange] at (12,-2) {
    Ti·∫øn tr√¨nh hu·∫•n luy·ªán\\
    Metrics theo th·ªùi gian th·ª±c\\
    Qu·∫£n l√Ω cache
};

\node [text width=3.5cm, align=center, font=\tiny, text=orange] at (16,-2) {
    SHAP analysis\\
    Confusion matrices\\
    Results export
};
\end{tikzpicture}
\caption{Quy tr√¨nh Wizard 5 B∆∞·ªõc c·ªßa AIO Classifier}
\label{fig:wizard_workflow}
\end{figure}

\textbf{B∆∞·ªõc 1 - L·ª±a ch·ªçn B·ªô d·ªØ li·ªáu v√† C·∫•u h√¨nh}:

\begin{figure}[H]
    \centering
\includegraphics[width=\textwidth]{UI/Step 1.jpg}
\caption{Giao di·ªán Step 1: Dataset Selection v√† Upload - T·∫£i file v√† preview d·ªØ li·ªáu}
\label{fig:wizard_step1_real}
\end{figure}

\begin{itemize}
    \item \textbf{Th√†nh ph·∫ßn T·∫£i t·ªáp}: \texttt{st.file\_uploader} v·ªõi validation cho CSV/Excel files
    \item \textbf{Xem tr∆∞·ªõc B·ªô d·ªØ li·ªáu}: \texttt{st.dataframe} preview v·ªõi automatic column type detection
    \item \textbf{C·∫•u h√¨nh Ph√¢n m·∫´u}: Sampling options v·ªõi category balancing capabilities
    \item \textbf{Ki·ªÉm tra Ch·∫•t l∆∞·ª£ng D·ªØ li·ªáu}: Automatic missing value detection v√† data quality checks
\end{itemize}

\textbf{B∆∞·ªõc 2 - Pipeline Ti·ªÅn x·ª≠ l√Ω}:

\begin{figure}[H]
    \centering
\subfloat[Ph·∫ßn 1: Column Selection v√† Configuration]{\includegraphics[width=0.48\textwidth]{UI/Step2-1.jpg}}
\quad
\subfloat[Ph·∫ßn 2: Data Processing v√† Sampling]{\includegraphics[width=0.48\textwidth]{UI/Step2-2.jpg}}
\caption{Giao di·ªán Step 2: Data Processing v√† Preprocessing v·ªõi 2 ph·∫ßn}
\label{fig:wizard_step2_real}
\end{figure}

\begin{itemize}
    \item \textbf{Column Selection}: st.selectbox ƒë·ªÉ ch·ªçn input v√† label columns
    \item \textbf{T√πy ch·ªçn Scaling}: Streamlit selectors cho StandardScaler, MinMaxScaler, RobustScaler
    \item \textbf{Data Splitting}: Train/validation/test split configuration v·ªõi custom ratios
    \item \textbf{Missing Data Handling}: Automatic handling strategies cho missing values
\end{itemize}

\textbf{B∆∞·ªõc 3 - C·∫•u h√¨nh M√¥ h√¨nh}:

\begin{figure}[H]
    \centering
\includegraphics[width=\textwidth]{UI/Step 3.jpg}
\caption{Giao di·ªán Step 3: Optuna Optimization v√† Ensemble Configuration}
\label{fig:wizard_step3_real}
\end{figure}

\begin{itemize}
    \item \textbf{Model Selection}: st.multiselect cho ch·ªçn multiple ML models t·ª´ 13 algorithms
    \item \textbf{Optuna Configuration}: Hyperparameter optimization settings v·ªõi trial numbers
    \item \textbf{Voting Ensemble}: Configuration cho voting v·ªõi custom weights
    \item \textbf{Stacking Ensemble}: Configuration cho stacking v·ªõi meta-learner selection
\end{itemize}

\textbf{B∆∞·ªõc 4 - Th·ª±c thi Hu·∫•n luy·ªán}:

\begin{figure}[H]
    \centering
\subfloat[Training Progress v√† Monitoring]{\includegraphics[width=0.48\textwidth]{UI/Step 4.jpg}}
\quad
\subfloat[Advanced Training Configuration]{\includegraphics[width=0.48\textwidth]{UI/Step 4 -2.jpg}}
\caption{Giao di·ªán Step 4: Training Execution and Monitoring v·ªõi 2 ph·∫ßn}
\label{fig:wizard_step4_real}
\end{figure}

\begin{itemize}
    \item \textbf{Training Progress}: \texttt{st.progress\_bar} v√† status text cho real-time monitoring
    \item \textbf{Performance Metrics}: Live accuracy v√† loss metrics during training
    \item \textbf{Cache Management}: Intelligent caching c·ªßa model results v√† predictions
    \item \textbf{Ensemble Training}: Batch training v·ªõi multiple models v√† ensemble methods
\end{itemize}

\textbf{B∆∞·ªõc 5 - Tr·ª±c quan h√≥a \& Ph√¢n t√≠ch}:

\begin{figure}[H]
\centering
\subfloat[Main Results Interface]{\includegraphics[width=0.48\textwidth]{UI/Step5-1.jpg}}
\quad
\subfloat[SHAP Analysis Visualization]{\includegraphics[width=0.48\textwidth]{UI/Step5-2.jpg}}
\caption{Giao di·ªán Step 5: SHAP Visualization v√† Confusion Matrix Analysis}
\label{fig:wizard_step5_real_1_2}
\end{figure}

\begin{figure}[H]
    \centering
\includegraphics[width=\textwidth]{UI/Step5-3.jpg}
\caption{Giao di·ªán Step 5: AIO Classifier Model Comparison v√† Export}
\label{fig:wizard_step5_real_3}
\end{figure}

\begin{itemize}
    \item \textbf{SHAP Analysis}: Multiple SHAP plot types v·ªõi feature importance
    \item \textbf{Confusion Matrices}: Detailed visualization cho t·ª´ng model performance
    \item \textbf{Model Comparison}: AIO Classifier metrics comparison across models
    \item \textbf{Export Capabilities}: Multiple formats (CSV, PNG, JSON) v·ªõi custom naming
\end{itemize}

\subsection{Session Management System}\label{subsec:session-management}

\subsubsection{Qu·∫£n l√Ω Tr·∫°ng th√°i Phi√™n Ti√™n ti·∫øn}

\textbf{Ki·∫øn tr√∫c Tr·∫°ng th√°i Phi√™n}:
\begin{itemize}
    \item \textbf{Duy tr√¨ Tr·∫°ng th√°i}: Tr·∫°ng th√°i phi√™n to√†n di·ªán v·ªõi t·ª± ƒë·ªông l∆∞u v√† c√°c c∆° ch·∫ø sao l∆∞u
    \item \textbf{Theo d√µi Ti·∫øn tr√¨nh}: Theo d√µi ti·∫øn tr√¨nh chi ti·∫øt qua t·∫•t c·∫£ c√°c b∆∞·ªõc wizard v·ªõi kh·∫£ nƒÉng l√†m ti·∫øp
    \item \textbf{Qu·∫£n l√Ω C·∫•u h√¨nh}: L∆∞u tr·ªØ t·∫≠p trung c√°c c·∫•u h√¨nh v√† t√πy ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    \item \textbf{T√≠ch h·ª£p Cache}: Cache nh·∫≠n bi·∫øt phi√™n ƒë·ªÉ t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t v√† gi·∫£m d∆∞ th·ª´a
\end{itemize}

\textbf{C∆° ch·∫ø Ph·ª•c h·ªìi Phi√™n}:
\begin{itemize}
    \item \textbf{T·ª± ƒë·ªông L∆∞u}: L∆∞u t·ª± ƒë·ªông tr·∫°ng th√°i phi√™n sau m·ªói h√†nh ƒë·ªông quan tr·ªçng
    \item \textbf{H·ªá th·ªëng Sao l∆∞u}: Sao l∆∞u ƒë·ªãnh k·ª≥ ƒë·ªÉ b·∫£o v·ªá ti·∫øn tr√¨nh ng∆∞·ªùi d√πng
    \item \textbf{T√πy ch·ªçn Ph·ª•c h·ªìi}: Ph·ª•c h·ªìi m∆∞·ª£t m√† t·ª´ s·ª± c·ªë h·ªá th·ªëng ho·∫∑c gi√°n ƒëo·∫°n m·∫°ng
    \item \textbf{ƒê·ªãnh gi√° D·ªØ li·ªáu}: ƒê·ªãnh gi√° d·ªØ li·ªáu phi√™n ƒë∆∞·ª£c ph·ª•c h·ªìi ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn
\end{itemize}

\begin{figure}[H]
    \centering
\begin{tikzpicture}[node distance=1.2cm]
% Define colors
\definecolor{darkgreen}{RGB}{34,139,34}
\definecolor{darkorange}{RGB}{255,140,0}
\definecolor{orange}{RGB}{255,165,0}

% Define styles for flow diagram
\tikzset{
    process/.style={rectangle, minimum width=3cm, minimum height=0.8cm, text centered, draw=darkorange, fill=darkorange!15},
    decision/.style={diamond, minimum width=2cm, minimum height=1cm, text centered, draw=orange, fill=orange!15},
    data/.style={cylinder, minimum width=2cm, minimum height=1cm, text centered, draw=darkgreen, fill=darkgreen!15},
    arrow/.style={thick,->,>=stealth}
}

% Process nodes
\node (start) [process] {User Action};
\node (validate) [decision, below=of start] {Validation Required?};
\node (process) [process, below=of validate] {Process Action};
\node (save) [process, below=of process] {Auto-Save Session};
\node (update) [data, below=of save] {Update Session State};
\node (backup) [process, left=of update, xshift=-2cm] {Periodic Backup};
\node (recovery) [process, right=of update, xshift=2cm] {Recovery Check};

% Arrows with colors
\draw [arrow, darkorange] (start) -- (validate);
\draw [arrow, orange] (validate) -- node[right, font=\tiny] {C√≥} (process);
\draw [arrow, darkorange] (validate.west) -- node[above, font=\tiny] {Kh√¥ng} (process.west);
\draw [arrow, darkorange] (process) -- (save);
\draw [arrow, darkgreen] (save) -- (update);
\draw [arrow, darkorange] (update) -- (backup);
\draw [arrow, darkorange] (update) -- (recovery);

% Additional flow indicators
\draw [arrow, dashed, darkgreen] (backup) -- node[above, font=\tiny] {Every 30s} (update);
\end{tikzpicture}
\caption{Bi·ªÉu ƒë·ªì Lu·ªìng Qu·∫£n l√Ω Phi√™n}
\label{fig:session_management}
\end{figure}

\subsubsection{Streamlit Session Management}

\textbf{Session State Management}:
\begin{itemize}
    \item \textbf{SessionManager}: S·ª≠ d·ª•ng wizard\_ui.session\_manager cho session persistence
    \item \textbf{Step Data}: L∆∞u tr·ªØ d·ªØ li·ªáu t·ª´ng b∆∞·ªõc v·ªõi \texttt{get\_step\_data()} v√† \texttt{set\_step\_data()}
    \item \textbf{Navigation}: ƒêi·ªÅu h∆∞·ªõng gi·ªØa c√°c b∆∞·ªõc v·ªõi \texttt{get\_current\_step()} v√† \texttt{set\_current\_step()}
    \item \textbf{Cache Resource}: \texttt{@st.cache\_resource} cho session management persistence
\end{itemize}

\textbf{Implementation chi ti·∫øt SessionManager}:

\begin{minted}{python}
class SessionManager:
    """Manages Streamlit session state for the wizard interface"""
    
    def __init__(self):
        self.session_key = "wizard_session"
        self.backup_file = "wizard_ui/session_backup.json"
        
    def initialize_session(self):
        """Initialize session with default values"""
        if self.session_key not in st.session_state:
            st.session_state[self.session_key] = {
                'current_step': 1,
                'step_data': {},
                'step_status': {},
                'configuration': {},
                'errors': [],
                'last_updated': datetime.now().isoformat()
            }
            
    def save_step_data(self, step: int, data: Dict[str, Any]):
        """Save data for specific step"""
        session = st.session_state[self.session_key]
        session['step_data'][step] = data
        session['last_updated'] = datetime.now().isoformat()
        
        # Auto-save to backup file
        self.save_to_backup()
        
    def get_step_data(self, step: int) -> Dict[str, Any]:
        """Get data for specific step"""
        session = st.session_state[self.session_key]
        return session['step_data'].get(step, {})
        
    def clear_session(self):
        """Clear all session data"""
        if self.session_key in st.session_state:
            del st.session_state[self.session_key]
        self.initialize_session()
\end{minted}

\textbf{Step Manager v√† Navigation System}:

\begin{minted}{python}
class StepStatus(Enum):
    """Enumeration for step completion status"""
    PENDING = "pending"
    IN_PROGRESS = "in_progress"
    COMPLETED = "completed"
    BLOCKED = "blocked"
    ERROR = "error"

class StepManager:
    """Manages wizard steps and transitions"""
    
    def __init__(self):
        self.current_step = 1
        self.step_status = {i: StepStatus.PENDING for i in range(1, 6)}
        self.step_data = {}
        
    def get_current_step(self) -> int:
        """Get current active step"""
        return self.current_step
        
    def can_proceed_to_step(self, step: int) -> bool:
        """Check if user can proceed to specified step"""
        # Check if all previous steps are completed
        for i in range(1, step):
            if self.step_status[i] != StepStatus.COMPLETED:
                return False
        return True
        
    def complete_step(self, step: int, data: Dict[str, Any]):
        """Mark step as completed and store data"""
        self.step_status[step] = StepStatus.COMPLETED
        self.step_data[step] = data
\end{minted}

\subsection{Error Handling \& Recovery}\label{subsec:error-handling}

\subsubsection{AIO Classifier Error Management}

\textbf{H·ªá th·ªëng Ph√¢n lo·∫°i L·ªói}:
\begin{itemize}
    \item \textbf{L·ªói Ng∆∞·ªùi d√πng}: L·ªói x√°c th·ª±c ƒë·∫ßu v√†o v·ªõi h∆∞·ªõng d·∫´n s·ª≠a l·ªói r√µ r√†ng
    \item \textbf{L·ªói H·ªá th·ªëng}: L·ªói k·ªπ thu·∫≠t v·ªõi c√°c n·ªó l·ª±c ph·ª•c h·ªìi t·ª± ƒë·ªông
    \item \textbf{L·ªói D·ªØ li·ªáu}: V·∫•n ƒë·ªÅ ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu v·ªõi c√°c g·ª£i √Ω th√¥ng minh ƒë·ªÉ gi·∫£i quy·∫øt
    \item \textbf{L·ªói T√†i nguy√™n}: V·∫•n ƒë·ªÅ v·ªÅ b·ªô nh·ªõ v√† t√†i nguy√™n t√≠nh to√°n v·ªõi s·ª± suy gi·∫£m m∆∞·ª£t m√†
\end{itemize}

\textbf{Recovery Mechanisms}:
\begin{itemize}
    \item \textbf{Th·ª≠ l·∫°i T·ª± ƒë·ªông}: Logic th·ª≠ l·∫°i th√¥ng minh cho c√°c l·ªói t·∫°m th·ªùi v·ªõi backoff theo c·∫•p s·ªë nh√¢n
    \item \textbf{Suy gi·∫£m M∆∞·ª£t m√†}: H·ªá th·ªëng ti·∫øp t·ª•c ho·∫°t ƒë·ªông v·ªõi ch·ª©c nƒÉng gi·∫£m khi c√≥ th·ªÉ
    \item \textbf{H∆∞·ªõng d·∫´n Ng∆∞·ªùi d√πng}: H∆∞·ªõng d·∫´n r√µ r√†ng cho ng∆∞·ªùi d√πng ƒë·ªÉ gi·∫£i quy·∫øt c√°c l·ªói c√≥ th·ªÉ ph·ª•c h·ªìi
    \item \textbf{B·∫£o to√†n Ng·ªØ c·∫£nh}: Duy tr√¨ ng·ªØ c·∫£nh c·ªßa ng∆∞·ªùi d√πng v√† ti·∫øn tr√¨nh trong qu√° tr√¨nh ph·ª•c h·ªìi l·ªói
\end{itemize}

\subsubsection{Khung ƒê·ªãnh gi√°}

\textbf{ƒê·ªãnh gi√° Theo th·ªùi gian th·ª±c}:
\begin{itemize}
    \item \textbf{ƒê·ªãnh gi√° ƒê·∫ßu v√†o}: Ph·∫£n h·ªìi ngay l·∫≠p t·ª©c cho c√°c ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng v·ªõi th√¥ng b√°o l·ªói r√µ r√†ng
    \item \textbf{ƒê·ªãnh gi√° D·ªØ li·ªáu}: Ki·ªÉm tra ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu to√†n di·ªán v·ªõi c√°c ƒë·ªÅ xu·∫•t c√≥ th·ªÉ th·ª±c hi·ªán
    \item \textbf{Ki·ªÉm tra Ph·ª• thu·ªôc}: ƒê·∫£m b·∫£o c√°c y√™u c·∫ßu ƒë∆∞·ª£c ƒë√°p ·ª©ng tr∆∞·ªõc khi cho ph√©p ti·∫øn tri·ªÉn
    \item \textbf{ƒê·ªãnh gi√° T√†i nguy√™n}: Ki·ªÉm tra kh·∫£ d·ª•ng c·ªßa t√†i nguy√™n tr∆∞·ªõc khi kh·ªüi t·∫°o c√°c ho·∫°t ƒë·ªông
\end{itemize}

\subsection{Ki·∫øn tr√∫c Thi·∫øt k·∫ø Responsive}\label{subsec:responsive-design}

\subsubsection{C√°c Th√†nh ph·∫ßn Giao di·ªán Th√≠ch ·ª©ng}

\textbf{Streamlit UI Components}:
\begin{itemize}
    \item \textbf{Wireframe Layout}: C·∫•u tr√∫c 5-step wizard v·ªõi render\_step*\_wireframe() functions
    \item \textbf{Interactive Elements}: \texttt{st.selectbox}, \texttt{st.button}, \texttt{st.file\_uploader} cho user interaction
    \item \textbf{Progress Indicators}: Progress bars v√† status text cho training monitoring
    \item \textbf{Data Display}: \texttt{st.dataframe}, \texttt{st.table} cho dataset preview v√† results
\end{itemize}

\textbf{Streamlit Optimization}:
\begin{itemize}
    \item \textbf{Cache Decorators}: \texttt{@st.cache\_resource} cho SessionManager persistence
    \item \textbf{Component Reuse}: T√°i s·ª≠ d·ª•ng Streamlit components qua c√°c steps
    \item \textbf{State Management}: \texttt{st.session\_state} integration v·ªõi SessionManager
    \item \textbf{Container Layout}: \texttt{st.container()}, \texttt{st.columns()} cho responsive layout
\end{itemize}

\subsection{Nguy√™n t·∫Øc Thi·∫øt k·∫ø Tr·∫£i nghi·ªám Ng∆∞·ªùi d√πng}\label{subsec:ux-principles}

\subsubsection{Qu·∫£n l√Ω T·∫£i Nh·∫≠n th·ª©c}

\textbf{Ti·∫øt l·ªô Ti·∫øn tr√¨nh}:
\begin{itemize}
    \item \textbf{Ph√¢n l·ªõp Th√¥ng tin}: Th√¥ng tin ph·ª©c t·∫°p ƒë∆∞·ª£c tr√¨nh b√†y trong c√°c l·ªõp d·ªÖ ti√™u h√≥a
    \item \textbf{Tr·ª£ gi√∫p Ng·ªØ c·∫£nh}: Th√¥ng tin tr·ª£ gi√∫p ƒë∆∞·ª£c hi·ªÉn th·ªã d·ª±a tr√™n ng·ªØ c·∫£nh ng∆∞·ªùi d√πng hi·ªán t·∫°i
    \item \textbf{T·∫≠p trung Nhi·ªám v·ª•}: Giao di·ªán t·∫≠p trung s·ª± ch√∫ √Ω v√†o nhi·ªám v·ª• hi·ªán t·∫°i ƒë·ªÉ gi·∫£m phi·ªÅn nhi·ªÖu
    \item \textbf{Th√≠ch ·ª©ng Chuy√™n m√¥n}: Giao di·ªán th√≠ch ·ª©ng ƒë·ªô ph·ª©c t·∫°p d·ª±a tr√™n m·ª©c ƒë·ªô kinh nghi·ªám ng∆∞·ªùi d√πng
\end{itemize}

\textbf{H·ªó tr·ª£ Quy·∫øt ƒë·ªãnh}:
\begin{itemize}
    \item \textbf{M·∫∑c ƒë·ªãnh Th√¥ng minh}: C√°c gi√° tr·ªã m·∫∑c ƒë·ªãnh th√¥ng minh d·ª±a tr√™n ƒë·∫∑c ƒëi·ªÉm b·ªô d·ªØ li·ªáu v√† l·ªãch s·ª≠ ng∆∞·ªùi d√πng
    \item \textbf{C√¥ng c·ª• ƒê·ªÅ xu·∫•t}: C√°c ƒë·ªÅ xu·∫•t ƒë∆∞·ª£c h·ªó tr·ª£ b·ªüi AI cho vi·ªác l·ª±a ch·ªçn m√¥ h√¨nh v√† tham s·ªë
    \item \textbf{D·ª± ƒëo√°n Hi·ªáu su·∫•t}: C√°c metrics hi·ªáu su·∫•t ∆∞·ªõc t√≠nh ƒë·ªÉ h∆∞·ªõng d·∫´n c√°c quy·∫øt ƒë·ªãnh c·ªßa ng∆∞·ªùi d√πng
    \item \textbf{Th·ª±c h√†nh T·ªët nh·∫•t}: T√≠ch h·ª£p c√°c th·ª±c h√†nh t·ªët nh·∫•t ML v√†o workflow ng∆∞·ªùi d√πng
\end{itemize}

\subsubsection{Streamlit User Experience}

\textbf{Built-in Streamlit Features}:
\begin{itemize}
    \item \textbf{Native UI}: Streamlit's built-in responsive design cho all devices
    \item \textbf{Error Handling}: \texttt{st.error()}, \texttt{st.warning()}, \texttt{st.info()} cho user feedback
    \item \textbf{Session Management}: Streamlit \texttt{session\_state} integration v·ªõi custom SessionManager
    \item \textbf{File Upload}: \texttt{st.file\_uploader} v·ªõi automatic file validation
\end{itemize}

\subsection{Performance \& Optimization}\label{subsec:wizard-optimization}

\subsubsection{Streamlit Performance}

\textbf{Cache Optimization}:
\begin{itemize}
    \item \textbf{\texttt{@st.cache\_resource}}: Session persistence cho SessionManager
    \item \textbf{Streamlit Caching}: Automatic caching c·ªßa Streamlit cho improved performance
    \item \textbf{Training Pipeline}: StreamlitTrainingPipeline v·ªõi optimized model training
    \item \textbf{Memory Management}: Efficient session state management
\end{itemize}

\textbf{Real-time Updates}:
\begin{itemize}
    \item \textbf{Progress Monitoring}: \texttt{st.progress} v√† status updates cho training
    \item \textbf{Dynamic UI}: Real-time updates v·ªõi Streamlit session refresh
    \item \textbf{Interactive Components}: Responsive UI elements v·ªõi instant feedback
    \item \textbf{File Processing}: Efficient file upload v√† processing workflow
\end{itemize}

\subsection{Training Pipeline Integration}\label{subsec:training-integration}

\subsubsection{StreamlitTrainingPipeline}

\textbf{Pipeline Architecture}:
\begin{itemize}
    \item \textbf{Model Factory Integration}: K·∫øt n·ªëi v·ªõi \texttt{models.model\_factory} cho 13 thu·∫≠t to√°n ML
    \item \textbf{Cache Management}: Intelligent caching system cho model results v√† predictions
    \item \textbf{Training Progress}: Real-time monitoring v·ªõi \texttt{st.progress\_bar} trong app
    \item \textbf{Error Handling}: AIO Classifier error handling v·ªõi \texttt{st.error()}, \texttt{st.warning()} messages
\end{itemize}

\textbf{Training Execution}:
\begin{itemize}
    \item \textbf{Multi-Model Training}: Batch training v·ªõi multiple model selection
    \item \textbf{Optimization Integration}: Optuna integration cho hyperparameter optimization
    \item \textbf{Ensemble Support}: Voting v√† Stacking ensemble configuration
    \item \textbf{Results Caching}: Model results caching v·ªõi automatic file management
\end{itemize}

\subsection{Code Examples v√† Implementation Chi ti·∫øt}

\subsubsection{Wizard Core Management System}

\textbf{WizardCore Class - L·ªõp ƒëi·ªÅu khi·ªÉn ch√≠nh c·ªßa Wizard}:

\begin{minted}{python}
class WizardCore:
    """Main controller for the wizard interface"""
    
    def __init__(self):
        self.session_manager = SessionManager()
        self.navigation = NavigationSystem()
        self.step_manager = StepManager()
        self.error_handler = ErrorHandler()
        
    def initialize_wizard(self):
        """Initialize wizard with default state"""
        self.session_manager.initialize_session()
        self.navigation.setup_navigation()
        self.step_manager.initialize_steps()
\end{minted}

\textbf{Ch√∫ th√≠ch}: WizardCore l√† l·ªõp ƒëi·ªÅu khi·ªÉn ch√≠nh ƒëi·ªÅu ph·ªëi t·∫•t c·∫£ c√°c components c·ªßa wizard interface. N√≥ qu·∫£n l√Ω session state, navigation gi·ªØa c√°c b∆∞·ªõc, v√† x·ª≠ l√Ω l·ªói m·ªôt c√°ch to√†n di·ªán.

\textbf{Step Management v√† Status Tracking}:

\begin{minted}{python}
class StepStatus(Enum):
    """Enumeration for step completion status"""
    PENDING = "pending"
    IN_PROGRESS = "in_progress" 
    COMPLETED = "completed"
    BLOCKED = "blocked"
    ERROR = "error"

class StepManager:
    """Manages wizard steps and transitions"""
    
    def __init__(self):
        self.current_step = 1
        self.step_status = {i: StepStatus.PENDING for i in range(1, 6)}
        self.step_data = {}
        
    def get_current_step(self) -> int:
        """Get current active step"""
        return self.current_step
        
    def can_proceed_to_step(self, step: int) -> bool:
        """Check if user can proceed to specified step"""
        # Check if all previous steps are completed
        for i in range(1, step):
            if self.step_status[i] != StepStatus.COMPLETED:
                return False
        return True
        
    def complete_step(self, step: int, data: Dict[str, Any]):
        """Mark step as completed and store data"""
        self.step_status[step] = StepStatus.COMPLETED
        self.step_data[step] = data
\end{minted}

\textbf{Ch√∫ th√≠ch}: StepManager ƒë·∫£m b·∫£o lu·ªìng l√†m vi·ªác c√≥ c·∫•u tr√∫c b·∫±ng c√°ch theo d√µi tr·∫°ng th√°i c·ªßa t·ª´ng b∆∞·ªõc v√† ngƒÉn ng∆∞·ªùi d√πng ti·∫øn l√™n b∆∞·ªõc ti·∫øp theo n·∫øu ch∆∞a ho√†n th√†nh c√°c b∆∞·ªõc tr∆∞·ªõc ƒë√≥.

\subsubsection{File Upload Component Implementation}

\textbf{File Upload Component - Component t·∫£i file}:

\begin{minted}{python}
class FileUploadComponent:
    """Reusable file upload component"""
    
    def __init__(self):
        self.supported_formats = ['.csv', '.xlsx', '.json']
        self.max_file_size = 100 * 1024 * 1024  # 100MB
        
    def render_file_upload(self):
        """Render file upload interface"""
        
        st.subheader("üìÅ Upload Dataset")
        
        # File uploader
        uploaded_file = st.file_uploader(
            "Choose a file",
            type=self.supported_formats,
            help=f"Supported formats: {', '.join(self.supported_formats)}"
        )
        
        if uploaded_file:
            # Validate file
            if not self.validate_file(uploaded_file):
                return None
                
            # Process file
            return self.process_uploaded_file(uploaded_file)
            
        return None
        
    def validate_file(self, file) -> bool:
        """Validate uploaded file"""
        
        # Check file size
        if file.size > self.max_file_size:
            st.error(f"File size exceeds limit of {self.max_file_size // (1024*1024)}MB")
            return False
            
        # Check file format
        file_extension = os.path.splitext(file.name)[1].lower()
        if file_extension not in self.supported_formats:
            st.error(f"Unsupported file format: {file_extension}")
            return False
            
        return True
\end{minted}

\textbf{Ch√∫ th√≠ch}: FileUploadComponent x·ª≠ l√Ω vi·ªác upload file v·ªõi validation ƒë·∫ßy ƒë·ªß v·ªÅ ƒë·ªãnh d·∫°ng v√† k√≠ch th∆∞·ªõc file. Component n√†y ƒë·∫£m b·∫£o ch·ªâ nh·ªØng file h·ª£p l·ªá m·ªõi ƒë∆∞·ª£c process.

\subsubsection{Dataset Preview Component}

\textbf{Dataset Preview Component - Component xem tr∆∞·ªõc d·ªØ li·ªáu}:

\begin{minted}{python}
class DatasetPreviewComponent:
    """Dataset preview and analysis component"""
    
    def render_dataset_preview(self, df: pd.DataFrame):
        """Render comprehensive dataset preview"""
        
        st.subheader("üìä Dataset Preview")
        
        # Basic info
        col1, col2, col3 = st.columns(3)
        
        with col1:
            st.metric("Rows", f"{df.shape[0]:,}")
        with col2:
            st.metric("Columns", f"{df.shape[1]:,}")
        with col3:
            st.metric("Memory Usage", f"{df.memory_usage(deep=True).sum() / 1024**2:.1f} MB")
        
        # Data preview
        st.subheader("Data Preview")
        
        # Show first few rows
        st.dataframe(df.head(10), use_container_width=True)
        
        # Data types
        st.subheader("Data Types")
        dtype_df = pd.DataFrame({
            'Column': df.columns,
            'Type': df.dtypes,
            'Non-Null Count': df.count(),
            'Null Count': df.isnull().sum()
        })
        st.dataframe(dtype_df, use_container_width=True)
\end{minted}

\textbf{Ch√∫ th√≠ch}: DatasetPreviewComponent cung c·∫•p m·ªôt b·∫£n preview to√†n di·ªán v·ªÅ dataset bao g·ªìm th√¥ng tin c∆° b·∫£n, preview d·ªØ li·ªáu, v√† ph√¢n t√≠ch missing values.

\subsubsection{Step 5 SHAP Visualization Implementation}

\textbf{SHAPVisualizationStep Class - L·ªõp Tri·ªÉn khai SHAP Visualization}:

\begin{minted}{python}
class SHAPVisualizationStep:
    """Step 5: SHAP Visualization & Model Interpretation"""
    
    def __init__(self):
        """Initialize Step 5"""
        self.session_manager = SessionManager()
        self.confusion_matrix_cache = confusion_matrix_cache
    
    def render(self) -> None:
        """Render the complete Step 5 interface"""
        st.title("üìä Step 5: SHAP Visualization & Model Interpretation")
        
        # Create tabs for different visualization sections
        tab1, tab2, tab3, tab4 = st.tabs([
            "üéØ Model Selection", 
            "üìä SHAP Analysis", 
            "üìà Confusion Matrices", 
            "üíæ Results Summary"
        ])
        
        with tab1:
            self._render_model_selection(available_caches)
        
        with tab2:
            self._render_shap_analysis()
        
        with tab3:
            self._render_confusion_matrices()
        
        with tab4:
            self._render_results_summary()
\end{minted}

\textbf{Ch√∫ th√≠ch}: SHAPVisualizationStep implement 4-tab interface ƒë·ªÉ comprehensive model analysis. H·ªá th·ªëng t√≠ch h·ª£p v·ªõi SessionManager v√† caching ƒë·ªÉ manage visualization workflow efficiently.

\textbf{Model Selection Interface - Giao di·ªán L·ª±a ch·ªçn M√¥ h√¨nh}:

\begin{minted}{python}
def _render_model_selection(self, available_caches: List[Dict[str, Any]]):
    """Render model selection interface"""
    st.markdown("**üéØ Available Models:**")
    
    # Display available models
    for i, model in enumerate(available_caches):
        col1, col2, col3, col4 = st.columns(4)
        
        with col1:
            model_key = f"{model['model_key']}_{model['scaler_key']}"
            st.write(f"**{model_key}**")
        
        with col2:
            dataset_id = model.get('dataset_id', 'unknown')
            st.write(f"Dataset: {dataset_id}")
        
        with col3:
            st.write(f"Accuracy: {model.get('accuracy', 'N/A')}")
        
        with col4:
            has_shap = "‚úÖ" if model['has_shap_sample'] else "‚ùå"
            st.write(f"SHAP: {has_shap}")
\end{minted}

\textbf{Ch√∫ th√≠ch}: Model selection interface display comprehensive model information bao g·ªìm model key, dataset, accuracy, v√† SHAP availability status ƒë·ªÉ help users make informed selection.

\textbf{SHAP Configuration System - H·ªá th·ªëng C·∫•u h√¨nh SHAP}:

\begin{minted}{python}
# SHAP configuration
st.markdown("**‚öôÔ∏è SHAP Configuration:**")

col1, col2 = st.columns(2)

with col1:
    enable_shap = st.checkbox(
        "Enable SHAP Analysis",
        value=SHAP_ENABLE,
        help="Generate SHAP visualizations cho selected models"
    )
    
    sample_size = st.number_input(
        "Sample Size cho SHAP",
        min_value=100,
        max_value=10000,
        value=SHAP_SAMPLE_SIZE,
        help="Number of samples to use cho SHAP analysis"
    )

with col2:
    output_dir = st.text_input(
        "Output Directory",
        value=SHAP_OUTPUT_DIR,
        help="Directory ƒë·ªÉ save SHAP plots"
    )
    
    plot_types = st.multiselect(
        "Plot Types",
        ["summary", "bar", "dependence", "waterfall"],
        default=["summary", "bar", "dependence"],
        help="Types of SHAP plots ƒë·ªÉ generate"
    )
\end{minted}

\textbf{Ch√∫ th√≠ch}: SHAP configuration system provides flexible controls cho visualization generation. Users c√≥ th·ªÉ adjust sample size, output directory, v√† plot types t√πy theo analytical needs.

\textbf{SHAP Analysis Generation - Sinh Ph√¢n t√≠ch SHAP}:

\begin{minted}{python}
def _generate_shap_analysis(self, selected_models: List[Dict], shap_config: Dict):
    """Generate comprehensive SHAP analysis cho selected models"""
    
    try:
        with st.spinner("üî¨ Generating SHAP analysis..."):
            
            for model in selected_models:
                model_key = model['model_key']
                dataset_id = model['dataset_id']
                scaler_key = model['scaler_key']
                
                # Load cached model v√† data
                cache_path = self.cache_manager.get_cache_path(model_key, dataset_id, scaler_key)
                model_data = self.cache_manager.load_model_cache(model_key, dataset_id, scaler_key)
                
                # Generate SHAP plots
                shap_plots = self._create_shap_plots(
                    model_data['model'],
                    model_data['shap_sample'],
                    shap_config
                )
                
                # Display plots trong tabs
                self._display_shap_plots(shap_plots, model_key)
                
                # Save plots to file system
                self._save_shap_plots(shap_plots, model_key, shap_config['output_dir'])
                
        st.success(f"‚úÖ SHAP analysis completed cho {len(selected_models)} models")
        
    except Exception as e:
        st.error(f"‚ùå Error generating SHAP analysis: {str(e)}")
        st.error("Vui l√≤ng ki·ªÉm tra cache data v√† model availability")
\end{minted}

\textbf{Ch√∫ th√≠ch}: SHAP analysis generation system t·ª± ƒë·ªông load cached models v√† generate comprehensive visualizations. H·ªá th·ªëng includes error handling v√† progress indicators ƒë·ªÉ improve user experience.

\subsection{T·ªïng k·∫øt Wizard Interface Architecture}

\noindent
Ki·∫øn tr√∫c Giao di·ªán Wizard c·ªßa N·ªÅn t·∫£ng ML To√†n Di·ªán s·ª≠ d·ª•ng Streamlit framework v·ªõi implementation th·ª±c t·∫ø. Thi·∫øt k·∫ø n√†y t·∫≠p trung v√†o tr·∫£i nghi·ªám ng∆∞·ªùi d√πng tr·ª±c quan v·ªõi 5-step workflow v√† t√≠ch h·ª£p seamless v·ªõi StreamlitTrainingPipeline.

Ki·∫øn tr√∫c th√†nh c√¥ng trong vi·ªác ƒë∆°n gi·∫£n h√≥a c√°c ho·∫°t ƒë·ªông ML ph·ª©c t·∫°p th√†nh c√°c b∆∞·ªõc tr·ª±c quan, cho ph√©p ng∆∞·ªùi d√πng v·ªõi c√°c m·ª©c kinh nghi·ªám kh√°c nhau s·ª≠ d·ª•ng hi·ªáu qu·∫£ 13 thu·∫≠t to√°n ML th√¥ng qua wizard interface. Vi·ªác t√≠ch h·ª£p SessionManager v√† caching system t·∫°o n·ªÅn t·∫£ng v·ªØng ch·∫Øc cho model training v√† evaluation tr√™n multiple datasets.